# 01 하둡 기초

## 빅데이터의 시대

### 빅데이터의 개념

빅데이터의 정의 by 맥킨지&IDC

- 데이터의 규모에 초점을 맞춘 정의 - 기존 데이터베이스 관리도구의 데이터 수집, 저장, 관리, 분석하는 역량을 넘어서는 데이터
- 업무 수행 방식에 초점을 맞춘 정의 - 다양한 종류의 대규모 데이터로부터 저렴한 비용으로 가치를 추출하고, 데이터의 빠른 수집, 발굴, 분석을 지원하도록 고안된 차세대 기술 및 아키텍처

빅데이터의 3대 요소 - 두가지만 충족하면 빅데이터

- 크기(volume)
    - 일반적으로 수십 테라바이트 혹은 수십 페타바이트 이상의 빅데이터에 해당
    - 분산 컴퓨팅 기법으로 접근해야함 : 분산 컴퓨팅 솔루션(구글의 GFS, 아파치 하둡), 대용량 병렬 처리 데이터베이스(EMC의 GreenPlum, HP의 Vertica, IBM의 Netezza, 데라데이터의 Kickfire 등)
- 속도(velocity)
    - 실시간 처리 - 데이터가 매우 빠른 속도로 생성되기 때문에
    - 장기적인 접근 - 수집된 데이터를 분석, 표현해야함
- 다양성(variety)
    - 정형 데이터 - 기존의 솔루션을 이용하여 비교적 쉽게 보관, 분석, 처리
    - 반정형 데이터 - 고정된 필드로 저장x, 메타데이터나 스키마 등을 포함하는 데이터
    - 비정형 데이터 - 고정된 필드에 저장돼 있지 않은 데이터

### 빅데이터의 출현 배경

데이터 폭증의 시대: 2011년에 1년간 전 세계에서 생성된 디지털 데이터의 양은 1.8제타바이트 - 매년 2배 이상씩 증가할 것

빅데이터가 중요한 이유: 기업, 정부, 의료, 교육 분야에서 적극적으로 활용 가능

## 하둡이란?

대용량 데이터를 분산 처리할 수 있는 자바 기반의 오픈소스 프레임워크

하둡은 분산 파일 시스템인 HDFS에 데이터를 저장하고, 분산 처리 시스템인 맵리듀스를 이용하여 데이터를 처리

### 왜 하둡인가?

- 오픈소스 - 소프트웨어 라이선스 비용 부담x
- 값비싼 유닉스 장비 사용x, x86 CPU에 리눅스 서버면 얼마든지 하둡을 설치해서 운영할 수 있음
- 데이터 저장 용량이 부족할 경우, 필요한 만큼 리눅스 서버만 추가하면 됨
- 데이터의 복제본을 저장하기 때문에 데이터의 유실이나 장애가 발생했을 때도 데이터 복구가 가능
- 여러 대의 서버에 데이터를 저장하고, 데이터가 저장된 각 서버에서 동시에 데이터를 처리하는 방식
- 저렴한 구축 비용과 비용 대비 빠른 데이터 처리, 그리고 장애를 대비한 특성

### 하둡이 지나온 길

2012년 1월 정식 1.0 버전 발표

- 강력한 보안 기능 - 커버로스 인증을 통해 네트워크 전체에 걸쳐 보안 확보 가능
- webHDFS REST API 제공 - 웹 기술을 이용해 하둡을 잘 모르는 관리자와 개발자들이 하둡을 더 쉽게 사용, 다양한 기능을 만들 수 있음
- H베이스가 완벽하게 구동

## 하둡 에코시스템
![!\[Alt text\](ch1-hadoop-ecosystem.png)](images/ch1-hadoop-ecosystem.png)

Zookeeper

- 서비스 분산
- 서버 동기화 - 데이터 안정성 보장
- 운영 서버 문제 발생 시, 대기 서버를 운영 서버로 변경하여 서비스 중지 없이 제공
- 분산환경 구성 서버 환경설정 통합적으로 관리

YARN

- 데이터 처리 작업을 실행하기 위한 클러스터 자원과 스케줄링을 위한 프레임워크
- 맵리듀스의 단점을 극복하기 위해 시작된 프로젝트

HBase

- HDFS기반의 컬럼 기반 데이터베이스
- 실시간 랜덤 조회 및 업데이트가 가능

Kafka

- 데이터 스트림을 실시간으로 관리하기 위한 분산 메세징 시스템
- publish-subscribe 모델로 구성되어 있으며, 데이터 손실을 막기 위하여 디스크에 데이터를 저장
- 파티셔닝을 지원 - 다수의 카프카 서버에서 메세지를 분산 처리할 수 있음
- 시스템 안정성을 위하여 로드밸런싱과 내고장성을 보장

Spark

- 인메모리 기반의 범용 데이터 처리 플랫폼
- 배치 처리, 머신러닝, SQL, 질의 처리, 스트리밍 데이터 처리, 그래프 라이브러리 처리와 같은 작업 수용 가능

## 하둡에 대한 오해

1. 기존 RDBMS를 대체하는 것이 아니라, RDBMS와 상호보완적인 특성을 띠고 있음
    1. ETL과정에 도움을 줌
2. 트랜잭션이나 무결성이 반드시 보장돼야 하는 데이터를 처리하는 데 적합하지 않음
    1. 배치성으로 데이터를 저장하거나 처리하는 데 적합한 시스템으로 구성돼 있기 때문
3. 실시간 처리가 절대로 불가능하지 않음
4. NoSQL이 아님

## 하둡의 과제

하둡의 문제점

- 고가용성 지원: 네임노드에 장애가 발생한다면 데이터를 더는 HDFS에 저장할 수 없고, 네임노드의 데이터가 유실될 경우 기존에 저장된 파일도 조회할 수 없음. 하지만 2.0부터는 네임노드의 고가용성 지원
- 파일 네임스페이스 제한: 메모리 용량에 따라 HDFS에 저장하는 파일과 디렉토리 개수가 제한을 받음
- 데이터 수정 불가: HDFS에 파일을 저장하면 파일의 이동이나 이름 변경과 같은 작업을 가능하지만 저장된 파일의 내용을 수정할 수 없음
- POSIX 명령어 미지원: 별도의 셸 명령어와 API를 이용해 파일 제어
- 전문 업체 부족