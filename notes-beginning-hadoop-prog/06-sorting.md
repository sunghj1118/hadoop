# 06: 정렬 구현하기

정렬은 맵리듀스의 핵심 기능 중 하나입니다. 하의 키를 기준으로 정렬되기 때문에 하나의 리듀스 태스크만 실행하면 쉽게 정렬을 해결할 수도 있습니다. 그러나 여러 데이터노드가 구성된 상황에서 리듀스 태스크 하나만 실행하는건 분산 환경의 장점을 살리지 않은 것입니다.

하둡은 개발자가 정렬을 수행할 수 있게 보조 정렬 (Secondary Sort), 부분 정렬 (Partial Sort), 전체 정렬 (Total Sort)을 제공합니다.

이번 장에서는 보조 정렬을 적용해 출력 데이터가 연도와 월의 순서대로 출려되도록 했습니다.

6.1 보조 정렬

---

2008,1

2008,10

2008,11

2008,12

2008,2

2008,3

---

5장에서의 정렬 결과를 확인하면 2008,10이 2008,2 보다 위에 정렬되어 있는 것을 확인할 수 있는데, 이는 하나의 문자열로 인식해서 그렇습니다. 이런 점을 해결하기 위해 보조 정렬을 사용할 수 있습니다.

보조 정렬을 다음과 같은 순서로 구현합니다.

1. 기존 키의 값들을 조합한 복합키 (composite key) 정의.
2. 복합키의 레코드를 정렬하기 위한 비교기 (comparator) 정의.
3. 그룹핑 키를 파티셔닝할 파티셔너 (partitioner) 정의.
4. 그룹핑 키를 정렬하기 위한 비교기 (comparator) 정의